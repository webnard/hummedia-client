/**
 * Adds an SVG to the given element and populates it with waveform
 * data from Hummedia. Requires socket support.
 * 
 * id - the id of the media asset to retrieve
 * element - the element in which to place the rendered SVG
 */
function HumWave(id, element) {
  var ns = "http://www.w3.org/2000/svg";
  var svg = document.createElementNS(ns, 'svg');
  var path = document.createElementNS(ns, 'path');
  var viewEndY = 100;

  element.appendChild(svg);
  svg.appendChild(path);

  function drawSVG(data) {
    // ensures that one data point equals one percentage of the graph in position
    svg.setAttribute('viewBox', '0 0 ' + data.length + ' ' + viewEndY);
    svg.setAttribute('preserveAspectRatio', 'none');
    var d = "M 0 " + viewEndY;

    var c = 0;
    var max = 0;

    data.forEach(function(a) {
      if(a>max) {
        max = a;
      }
    });

    data.forEach(function(a) {
      d += ' L' + (++c) + " " + (viewEndY-(viewEndY*(a/max)));
    });

    d += 'Z';
    path.setAttribute('d', d);
  }

  // TODO: take data from Hummedia
  drawSVG([0.0002,0.0002,0.0002,0.0002,0.0002,0.0001,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.1026,0.1607,0.2750,0.1741,0.2054,0.2860,0.1234,0.3248,0.2326,0.4254,0.4350,0.3593,0.1454,0.2779,0.2202,0.2203,0.2314,0.2561,0.2405,0.3373,0.1670,0.2989,0.2440,0.2468,0.2288,0.2764,0.2617,0.1698,0.1991,0.3317,0.1888,0.3657,0.1460,0.2015,0.2578,0.2181,0.2882,0.1695,0.2791,0.2791,0.3003,0.2996,0.1951,0.2780,0.2865,0.3537,0.3791,0.2711,0.2747,0.2632,0.4339,0.2903,0.2759,0.2608,0.4234,0.3940,0.2870,0.3069,0.3236,0.4360,0.3388,0.3845,0.2782,0.3388,0.4331,0.2703,0.3735,0.3298,0.4607,0.2907,0.5104,0.3903,0.3029,0.4147,0.2615,0.5414,0.4712,0.2805,0.2856,0.5553,0.6949,0.3715,0.4560,0.4512,0.3876,0.4790,0.3124,0.3817,0.4029,0.4906,0.4312,0.4776,0.3414,0.5317,0.5235,0.3877,0.4078,0.3824,0.3837,0.3899,0.3528,0.3878,0.3077,0.3035,0.3782,0.4924,0.2536,0.2528,0.4390,0.2319,0.3105,0.4906,0.3592,0.4732,0.4322,0.3544,0.3901,0.5037,0.3973,0.3973,0.3022,0.3929,0.5478,0.2354,0.2891,0.3141,0.2671,0.3788,0.4090,0.3251,0.4911,0.4639,0.3308,0.3918,0.3770,0.3899,0.3942,0.2886,0.4698,0.4123,0.3502,0.4436,0.4299,0.4442,0.4249,0.4256,0.3803,0.3227,0.3607,0.3247,0.3473,0.3575,0.3286,0.5852,0.5229,0.3078,0.4311,0.3951,0.4576,0.3488,0.2928,0.3899,0.3670,0.3935,0.3382,0.3985,0.4425,0.3834,0.3794,0.3796,0.5172,0.4158,0.3799,0.3931,0.3432,0.4238,0.4837,0.3773,0.3402,0.3991,0.3876,0.4243,0.4922,0.4406,0.4958,0.2889,0.4300,0.4975,0.4154,0.4580,0.4295,0.3832,0.5301,0.5095,0.3944,0.4173,0.3305,0.4657,0.4448,0.3102,0.3395,0.3315,0.5076,0.5626,0.3443,0.4068,0.4392,0.4520,0.3506,0.3922,0.5042,0.4298,0.6222,0.3598,0.5277,0.2806,0.4359,0.4679,0.3473,0.4525,0.3824,0.3578,0.3844,0.4119,0.3498,0.4255,0.5165,0.3646,0.4391,0.4004,0.5452,0.4955,0.4726,0.3279,0.4752,0.4619,0.4398,0.2958,0.3639,0.3767,0.3789,0.4110,0.4054,0.4847,0.5630,0.4279,0.4167,0.4911,0.4652,0.4531,0.3702,0.3528,0.4616,0.2956,0.4266,0.4549,0.3476,0.4179,0.4973,0.4115,0.3437,0.3937,0.4617,0.4004,0.4337,0.4808,0.3786,0.4441,0.5096,0.3730,0.3597,0.3867,0.5534,0.3504,0.4898,0.3322,0.4581,0.4550,0.5779,0.6847,0.4455,0.6933,0.4394,0.4021,0.3762,0.4076,0.6232,0.3929,0.4140,0.4170,0.4499,0.6194,0.4058,0.3425,0.5181,0.6473,0.4943,0.3228,0.3010,0.5139,0.6052,0.4682,0.4023,0.3953,0.6807,0.5399,0.4172,0.4625,0.3860,0.6641,0.4383,0.4400,0.4770,0.5971,0.4689,0.4531,0.5854,0.4028,0.3987,0.5050,0.4927,0.4019,0.4419,0.4203,0.3680,0.5119,0.5049,0.4827,0.5355,0.4015,0.4342,0.5224,0.5356,0.4150,0.4493,0.4919,0.4611,0.4917,0.3705,0.4707,0.5345,0.4852,0.3851,0.3474,0.5343,0.6137,0.5136,0.3589,0.4549,0.4255,0.5434,0.5718,0.3345,0.5412,0.4413,0.4807,0.5186,0.3985,0.4483,0.4384,0.5649,0.4272,0.3156,0.3709,0.5278,0.7872,0.3924,0.2996,0.5807,0.5334,0.5605,0.5282,0.3898,0.3962,0.5579,0.4803,0.4310,0.3825,0.4375,0.4718,0.5763,0.3590,0.3977,0.5240,0.4912,0.4439,0.5210,0.4575,0.5022,0.4859,0.4381,0.5214,0.4287,0.6484,0.6791,0.4972,0.5057,0.4065,0.6054,0.3428,0.2467,0.5222,0.5188,0.6048,0.3672,0.4952,0.3441,0.6349,0.5339,0.2819,0.6548,0.4474,0.5875,0.2598,0.2951,0.5881,0.5080,0.4966,0.3962,0.4008,0.5077,0.4917,0.5525,0.4091,0.4975,0.4339,0.5962,0.4216,0.4822,0.5690,0.4409,0.4648,0.5201,0.3099,0.6189,0.3784,0.4812,0.4829,0.6452,0.4985,0.4395,0.3972,0.2810,0.5768,0.3873,0.4484,0.3252,0.4114,0.4438,0.3991,0.4004,0.3102,0.6567,0.7034,0.4794,0.4125,0.4981,0.5929,0.4671,0.5017,0.3045,0.6218,0.5320,0.3869,0.3618,0.3045,0.5701,0.4654,0.3758,0.4214,0.3543,0.4125,0.4103,0.4027,0.3749,0.4387,0.5489,0.4805,0.4761,0.3508,0.3785,0.5080,0.4692,0.5191,0.4148,0.3758,0.4211,0.5077,0.3969,0.4328,0.4171,0.3846,0.4479,0.4224,0.3570,0.4951,0.4458,0.4967,0.3509,0.3939,0.3414,0.3906,0.5616,0.3337,0.4321,0.4201,0.4840,0.4839,0.4431,0.5424,0.5411,0.4621,0.5423,0.5311,0.5190,0.5540,0.5239,0.4673,0.6005,0.3869,0.4346,0.4581,0.4427,0.5597,0.3803,0.5370,0.4510,0.5329,0.4168,0.2636,0.4392,0.3731,0.5034,0.4013,0.4280,0.4643,0.3984,0.4460,0.2912,0.4700,0.3463,0.5603,0.3736,0.2776,0.4689,0.4319,0.6107,0.2529,0.2649,0.4035,0.4002,0.5474,0.3497,0.2912,0.4468,0.4943,0.5167,0.4777,0.3716,0.3326,0.5158,0.3109,0.3222,0.3379,0.3449,0.4089,0.2722,0.2949,0.5029,0.2588,0.3130,0.3411,0.2469,0.3728,0.4703,0.3416,0.2794,0.2534,0.3943,0.3226,0.2492,0.2660,0.2879,0.3377,0.3118,0.2720,0.2490,0.3132,0.4375,0.3411,0.2005,0.2324,0.2944,0.3468,0.1865,0.2056,0.2150,0.3033,0.2461,0.1993,0.2004,0.2757,0.2755,0.2961,0.1692,0.2550,0.2285,0.2804,0.2407,0.1960,0.2636,0.2061,0.1889,0.1931,0.1420,0.2205,0.2008,0.1538,0.1287,0.1449,0.1574,0.1571,0.0995,0.1319,0.1246,0.1430,0.1322,0.0845,0.1056,0.1164,0.1217,0.1071,0.0938,0.0980,0.0842,0.1177,0.0756,0.0689,0.0810,0.0959,0.0972,0.0673,0.0456,0.0562,0.0700,0.0646,0.0422,0.0696,0.0686,0.0569,0.0427,0.0375,0.0388,0.0336,0.0392,0.0254,0.0381,0.0278,0.0244,0.0245,0.0243,0.0204,0.0230,0.0156,0.0203,0.0190,0.0174,0.0136,0.0167,0.0156,0.0144,0.0138,0.0127,0.0092,0.0101,0.0093,0.0119,0.0094,0.0097,0.0083,0.0072,0.0060,0.0084,0.0077,0.0054,0.0059,0.0065,0.0048,0.0041,0.0052,0.0039,0.0049,0.0039,0.0039,0.0030,0.0025,0.0027,0.0029,0.0038,0.0020,0.0014,0.0021,0.0023,0.0021,0.0014,0.0012,0.0016,0.0019,0.0016,0.0014,0.0009,0.0015,0.0012,0.0008,0.0008,0.0009,0.0007,0.0007,0.0007,0.0007,0.0006,0.0005,0.0006,0.0005,0.0005,0.0006,0.0004,0.0004,0.0003,0.0004,0.0002,0.0003,0.0003,0.0003]);
};

HumWave.prototype.api = 'https://hummedia.byu.edu/api/v2/';
